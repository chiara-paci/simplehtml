<!DOCTYPE html>
<html lang="it-IT" dir="ltr">
  <head><title>Conto alla rovescia Writer&apos;s Dream</title>
    
    <meta charset="utf-8"/>
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i" rel="stylesheet" referrerpolicy="origin"/>
    <link rel="shortcut icon" type="image/x-icon" href="https://www.writersdream.org/favicon.ico"/>


    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    
    <style>

* {
  box-sizing: border-box;
}

body {
    display: flex;
    flex-direction: column;
    flex-wrap: nowrap;
    justify-content: center;
    align-items: center;
    align-content: center;
width=100%;

    padding: 0;
    margin: 0;
    background-color: rgb(255, 255, 255);
    font-family: "Roboto", "Helvetica Neue", Helvetica, Arial;
}

div.headings,span.label {
    text-align: center;
    color: rgb(253, 164, 48);
}

span {
    text-align: center;
}

span.number {
    font-size: 10vw;
color: #505050;
}

span.label {
    font-size: 3.5vw;
}

div.headings {
    font-size: 4vw;
    padding: 0;
    margin: 0;
}

main {
    display: flex;
    flex-direction: row;
    padding: 1vw;
    width: 100vw;
}

div.box {
    display: flex;
    flex-direction: column;
    padding: 1vw;
    width: 25vw;
    border-right: 1px solid  rgb(253, 164, 48);
}

div.box:last-of-type {
    border-right: none;
}

svg {
    vertical-align: middle;
    width: 8vw;
    height: 8vw;
}

svg.defs {
    display: none;
}



    </style>

  </head>


  <body>

    <svg class="defs"
	 width="162"
	 height="162"
	 viewBox="0 0 42.862501 42.862501"
	 version="1.1"
	 id="svg8">
      <defs>
	<g
	   id="logowd"
	   style="display:inline;opacity:1"
	   transform="translate(58.923828,-112.50242)">
	  <circle
	     style="opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:2.64583302;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:normal"
	     id="path4669"
	     cx="-37.492577"
	     cy="133.93367"
	     r="21.355656" />
	  <g
	     id="g4667"
	     transform="rotate(-30,-64.039674,138.11589)">
	    <path
               transform="matrix(0.26458333,0,0,0.26458333,-1.6666667e-7,-1.0416666e-6)"
               id="path4588"
               d="m -148.92773,512.51953 a 44.999997,44.999997 0 0 0 -43.5918,34 H -167 v -9 h -10.63281 a 35.000001,35.000001 0 0 1 28.70508,-15 35.000001,35.000001 0 0 1 29.41992,16.04492 c 4.60217,3.62562 9.2574,6.38941 14.24414,8.29297 a 44.999997,44.999997 0 0 0 -43.66406,-34.33789 z m 43.66796,55.66016 c -5.01581,1.91412 -9.69594,4.70122 -14.32421,8.35742 a 35.000001,35.000001 0 0 1 -29.34375,15.98242 35.000001,35.000001 0 0 1 -28.67188,-15 H -167 v -9 h -25.50586 a 44.999997,44.999997 0 0 0 43.57813,34 44.999997,44.999997 0 0 0 43.66796,-34.33984 z"
               style="display:inline;opacity:1;fill:#505050;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:9.99999905;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:normal" />
	    <path
               d="m -43.656253,152.27292 3e-6,-9.525 c 0,-0.79375 2.11667,-0.79375 2.11667,0 l -3e-6,9.525 c 0,0.79375 -2.11667,0.79375 -2.11667,0 z m 9.789587,-11.37713 c -1.852084,3.17504 -3.175,3.17504 -7.14375,3.175 v 6.87917 c 3.96875,0 5.291666,4e-5 7.14375,3.175 0.79375,-2.64583 7.408333,-6.08542 14.022916,-6.08542 0.172448,0 0.287731,-0.11305 0.347783,-0.26458 h -12.289172 c -0.120507,0.46672 -0.541165,0.79305 -1.023194,0.79375 -0.584502,0 -1.058333,-0.47383 -1.058333,-1.05834 0,-0.5845 0.473831,-1.05833 1.058333,-1.05833 0.482219,5.3e-4 0.903155,0.32684 1.02371,0.79375 h 12.288656 c -0.06005,-0.15153 -0.175335,-0.26458 -0.347783,-0.26458 -6.614583,0 -13.229166,-3.43958 -14.022916,-6.08542 z m -23.547917,5.55629 h 12.435416 c 0.79375,0 0.79375,2.11667 0,2.11667 h -12.435416 c -0.79375,0 -0.79375,-2.11667 0,-2.11667 z"
               style="opacity:1;fill:#fda430;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:2.64583325;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:normal"
               id="rect4606-6" />
	  </g>
	</g>
      </defs>
    </svg>

    <div class="headings">
      <span id="title"></span></div>

    <div class="headings">
      	<svg
	   width="162"
	   height="162"
	   viewBox="0 0 42.862501 42.862501"
	   version="1.1"
	   id="svg8">
	  <use xlink:href="#logowd" />
	</svg>
    </div>

    
    <main>
    
      <div class="box" id="daysbox">
	<span id="days" class="number"></span>
	<span class="label">giorni</span>
      </div>

      <div class="box">
	<span id="hours" class="number"></span>
	<span class="label">ore</span>
      </div>

      <div class="box">
	<span id="minutes" class="number"></span>
	<span class="label">minuti</span>
      </div>

      <div class="box">
	<span id="seconds" class="number"></span>
	<span class="label">secondi</span>
      </div>

    </main>

    <div class="headings" id="target"></div>
    
    <script src="./luxon.min.js"></script>

    <script>

var DateTime = luxon.DateTime;
var Interval = luxon.Interval;

var TARGET_DT = "";

var pad = function(num) {
    if (num>=10) return num.toString();
    return "0"+num.toString();
}

var update = function(){
    if (!TARGET_DT) return;
    var delta=TARGET_DT.diffNow(["days","hours","minutes","seconds"],{zone: 'Europe/Rome'});

    console.log(delta.days,delta.hours,delta.minutes,Math.floor(delta.seconds));

    var days=delta.days,hours=delta.hours,minutes=delta.minutes,seconds=Math.floor(delta.seconds);

    if (days > 0) {
	$("#days").html(days);
    } else {
	$("#days").hide();
    };

    if (hours < 0) {
	$("#hours").html("00");
	$("#minutes").html("00");
	$("#seconds").html("00");
    } else {
	$("#hours").html(pad(hours));
	$("#minutes").html(pad(minutes));
	$("#seconds").html(pad(seconds));
    }
    
};
      
if (window.location.search) {
    var query=window.location.search.substr(1);
    var argv=query.split("&");
    TARGET_DT=DateTime.fromISO(argv[0], {zone: 'Europe/Rome'});
    $("#title").html(decodeURI(argv[1]));
    var target_text=TARGET_DT.toFormat('cccc d LLLL yyyy', { locale: "it" });
    switch (argv.length){
    case 2:
	break;
    case 3:
	switch (argv[2]) {
	    case "date": break;
	    case "time": 
	        target_text=TARGET_DT.toFormat('yy:mm:ss', { locale: "it" });
	        break;
	    case "datetime": 
	        target_text=TARGET_DT.toFormat('ccc d LLL yyyy hh:mm:ss', { locale: "it" });
	        break;
            default:
	        target_text=argv[2];
                break;
	}
    }

    $("#target").html(target_text);

}

update();

setInterval(update,1000);

    </script>

  </body>

</html>
